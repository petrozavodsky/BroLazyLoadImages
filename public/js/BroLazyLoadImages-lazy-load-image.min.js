window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener("load",function(){var i,e,a=document.getElementsByClassName("progressive replace");window.addEventListener("scroll",t,!1),window.addEventListener("resize",t,!1),MutationObserver&&new MutationObserver(function(){a.length!==i&&n()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0,characterData:!0});function t(){e=e||setTimeout(function(){e=null,n()},100)}function n(){a.length&&requestAnimationFrame(function(){for(var e,t,n=window.innerHeight,r=0;r<a.length;)0<(t=(e=a[r].getBoundingClientRect()).top)+e.height&&t<n?o(a[r]):r++;i=a.length})}function o(t){var e=function(e){var t,n,r,i,a,o,s,d,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,u="";for(;i=c.indexOf(e.charAt(l++)),a=c.indexOf(e.charAt(l++)),o=c.indexOf(e.charAt(l++)),s=c.indexOf(e.charAt(l++)),t=(d=i<<18|a<<12|o<<6|s)>>16&255,n=d>>8&255,r=255&d,u+=64===o?String.fromCharCode(t):64===s?String.fromCharCode(t,n):String.fromCharCode(t,n,r),l<e.length;);return JSON.parse(u)}(t.getAttribute("data-attributes")),n=new Image;for(var r in e)"class"===r?n.className=e[r]+" reveal ":n[r]=e[r];function i(){requestAnimationFrame(function(){var e=t.querySelector&&t.querySelector("img.preview");t.insertBefore(n,e&&e.nextSibling).addEventListener("animationend",function(){e&&t.removeChild(e),n.classList.remove("reveal")})})}n.complete?i():n.onload=i,t.classList.remove("replace")}n()},!1);